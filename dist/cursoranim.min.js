/*!
 * CursorAnim.js
 * https://github.com/TeKrop/cursoranim
 *
 * Copyright 2015 Valentin PORCHET
 * Released under the MIT license
 */
function findCenter(e){var t,n=$(e.ownerDocument);return e=$(e),t=e.offset(),{x:t.left+e.outerWidth()/2-n.scrollLeft(),y:t.top+e.outerHeight()/2-n.scrollTop()}}function findCorner(e){var t,n=$(e.ownerDocument);return e=$(e),t=e.offset(),{x:t.left-n.scrollLeft(),y:t.top-n.scrollTop()}}$.extend($.simulate.prototype,{simulateDrag:function(){var e=0,t=this.target,n=t.ownerDocument,o=this.options,i="corner"===o.handle?findCorner(t):findCenter(t),a=Math.floor(i.x),r=Math.floor(i.y),s={clientX:a,clientY:r},l=o.dx||(void 0!==o.x?o.x-a:0),u=o.dy||(void 0!==o.y?o.y-r:0),c=o.moves||3;for(this.simulateEvent(t,"mousedown",s);c>e;e++)a+=l/c,r+=u/c,s={clientX:Math.round(a),clientY:Math.round(r)},this.simulateEvent(n,"mousemove",s);$.contains(n,t)&&this.simulateEvent(t,"click",s)},simulateDrop:function(){var e=0,t=this.target,n=t.ownerDocument,o=this.options,i="corner"===o.handle?findCorner(t):findCenter(t),a=Math.floor(i.x),r=Math.floor(i.y),s={clientX:a,clientY:r},l=o.dx||(void 0!==o.x?o.x-a:0),u=o.dy||(void 0!==o.y?o.y-r:0),c=o.moves||3;for(this.simulateEvent(t,"mousedown",s);c>e;e++)a+=l/c,r+=u/c,s={clientX:Math.round(a),clientY:Math.round(r)},this.simulateEvent(n,"mousemove",s);$.contains(n,t)?(this.simulateEvent(t,"mouseup",s),this.simulateEvent(t,"click",s)):this.simulateEvent(n,"mouseup",s)}});var CursorAnim=function(){"use strict";var mousePosition={x:0,y:0},isDragging=!1,draggedElement=null,lastTargettedElement=null,animating=!1,correctEvents=["move","click","drag","drop","wait","type"],cursor=null,overlay=null,animationDuration=1e3,animationEasing="easeInOutCubic",animationCursor="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAATCAYAAACk9eypAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wcFCgwPm9//MwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACcElEQVQoz22Sb09TdxTHvy2XFEyMbkozK50GNaTdjIbEByQ+MgGZFKOYQJbtyXwlxvfhE81eAOHhttCEjjYCRjSoI2CFjSWkEaz33vb23vv7fXxQKP47yUnOg/M533NOvsoNDlEpLwlLO0FBEAjYT/NRjXT61HkmCpOUFxb1bs9LHEDWWoVh+EkzIA2c/YGN9S0mb0/z8sV6BwrD+ItmQDo/cBEsvKluM3l7mvLCorCoXndlzJeg0ifPYGLAwsb6FhOFycObvqaQzeZwXReAOI6pVjcZHR377BGRLKEgagMAjUYDgCgy7O6+Y+x6oQPFJhAYxXHYBowxADSbzX0ly/Z/OxTGb1Gar3TW8TyvDURRBIC1tqOyt+tSff0vN366SaXyWL7fPLzhIIwx+H6TIAgxMXhuwPLSCqMj41TKy8J+BHie15ler7u475tsbf6P77WoLKzw8/Rd/vqzpEQ2m2Nt7Yl6enpkjNHeXl29vb2KQiPHcVSr1WRiRzs7O7p//54cSXIcR3Ecy/M8RVHU3pWkpqamlEqlJHpkrZExRvo+e4FGMyJoGf5Zq3Iqc4YHD36nVnO5dq3AzMwfAmRM24TqP32OVmh5urLK8W/6KFeWdenyFba331IqLTE0dJUDM7ZaLSWTSWl19blGRkY0NzeXyOVyyufzKhaLSqfT6u/PaHZ2VolEQl1dXdLNiTv0pb+j9HdZYWRkQUvLz/TjxSGePX/F/Pwiw8PDNBoNAXIePXqYOHrsiOLYynGSkqR8PqdMJiPf9/XtieNKpVLq7u6WJAmLDFZB2JLBqhXGCiMjvxFq4Nwgv/z6G8VisWOPD8bOS8l4Tfm3AAAAAElFTkSuQmCC",events=null,currentPosition={x:0,y:0};$(document).on("mousemove",function(e){null==e.relatedTarget&&(mousePosition={x:e.pageX,y:e.pageY})});var onDragCustomEvent=function(e,t){t.position.left=currentPosition.x,t.position.top=currentPosition.y},loadProcess=function(e){var t=null,n=null;if("string"==typeof e)if(-1!==e.indexOf(".json",e.length-5))$.ajax({url:e,async:!1,dataType:"json",mimeType:"application/json",success:function(e){n=e}});else try{n=JSON.parse(e)}catch(o){throw console.error(o.name+" : "+o.message),new TypeError("Your string doesn't contain valid json data.")}else{if("object"!=typeof e)throw new TypeError("CursorAnim data must be in json format, either by filename, string or array. You provided : "+typeof e);e=JSON.parse(JSON.stringify(e)),n=e}return t=convertDataToEvents(n)},convertDataToEvents=function(jsonData){var actions=[];actions.push(hideCursor);for(var i=0;i<jsonData.length;i++)if("action"in jsonData[i])if(eval("typeof "+jsonData[i].action+" === 'function'")&&correctEvents.indexOf(jsonData[i].action)>-1){var functionContent="return CursorAnim."+jsonData[i].action+"(";functionContent+="options"in jsonData[i]?JSON.stringify(jsonData[i].options)+", ":"{}, ",functionContent+="callback);",actions.push(new Function("callback",functionContent))}else console.warn("The event '"+jsonData[i].action+"' doesn't exist. Skipping it.");else console.warn("Incorrect event : no action was provided. Skipping it.");return actions.push(returnToMousePosition,showCursor),actions},hideCursor=function(e){$("body").css({cursor:"none"}),$("body").append('<img id="cursorAnim" alt="cursor animation" src="'+animationCursor+'"/>'),$("body").append('<div id="overlayCursorAnim"></div>');var t=window.scrollX,n=window.scrollY;window.onscroll=function(){window.scrollTo(t,n)},cursor=$("#cursorAnim"),overlay=$("#overlayCursorAnim"),cursor.css({top:mousePosition.y,left:mousePosition.x}),e()},showCursor=function(e){$("body").css({cursor:"auto"}),cursor.remove(),overlay.remove(),window.onscroll=function(){},isDragging===!0?drop({},e):e()},returnToMousePosition=function(e){cursor.animate({left:mousePosition.x,top:mousePosition.y},{duration:animationDuration,specialEasing:{left:animationEasing,top:animationEasing},step:function(e,t){t.end="left"===t.prop?mousePosition.x:mousePosition.y},complete:e})},move=function(e,t){var n=parseInt(e.duration)||animationDuration,o=e.easing||animationEasing,i=cursor.offset().left,a=cursor.offset().top,r=null,s=null;if("selector"in e||"position"in e){if("selector"in e){if(lastTargettedElement=$(e.selector),!lastTargettedElement.length)throw showCursor(t),new ReferenceError("The object "+e.selector+" targetted by the move function doesn't exists.");r=lastTargettedElement.offset().left+lastTargettedElement.outerWidth()/2,s=lastTargettedElement.offset().top+lastTargettedElement.outerHeight()/2}else{var l=document.elementFromPoint(parseInt(e.position.x),parseInt(e.position.y));lastTargettedElement=null===l?lastTargettedElement:$(l),r=e.position.x,s=e.position.y}isDragging===!0?(currentPosition={x:draggedElement.position().left,y:draggedElement.position().top},cursor.animate({left:r,top:s},{duration:n,specialEasing:{left:o,top:o},step:function(e,t){"left"==t.prop?(draggedElement.simulate("drag",{dx:e-i,dy:0}),currentPosition.x+=e-i,i=e):(draggedElement.simulate("drag",{dx:0,dy:e-a}),currentPosition.y+=e-a,a=e)},complete:t})):cursor.animate({left:r,top:s},{duration:n,specialEasing:{left:o,top:o},complete:t})}else console.warn("Didn't provide CSS selector or position for cursor to move on. Skipping."),t()},click=function(e,t){lastTargettedElement.click(),t()},drag=function(e,t){if(isDragging=!0,draggedElement=lastTargettedElement,!draggedElement.is(":data(ui-draggable)"))throw new Error("The element "+draggedElement.selector+" is not draggable. Please use drag only on jQuery UI draggable elements.");"clone"===draggedElement.draggable("option").helper&&draggedElement.bind("drag",onDragCustomEvent),t()},drop=function(e,t){"clone"===draggedElement.draggable("option").helper&&draggedElement.unbind("drag"),lastTargettedElement.simulate("drop",{target:draggedElement}),isDragging=!1,draggedElement=null,currentPosition={x:0,y:0},t()},wait=function(e,t){var n=parseInt(e.duration)||animationDuration;setTimeout(t,n)},type=function(e,t){lastTargettedElement.is("input")||lastTargettedElement.is("textarea")?"strings"in e?(lastTargettedElement.simulate("focus"),console.log("type"),lastTargettedElement.typed({strings:e.strings,typeSpeed:e.typeSpeed||0,startDelay:e.startDelay||0,backSpeed:e.backSpeed||0,backDelay:e.backDelay||500,contentType:"text",onStringTyped:function(){console.log("change"),lastTargettedElement.trigger("propertychange")},callback:function(){lastTargettedElement.simulate("blur"),lastTargettedElement.removeData("typed"),t()}})):(console.warn("type function was called without text. Skipping."),t()):(console.warn("the targetted div isn't an input or textarea. Skipping."),t())};return{setOptions:function(e){if((null===e||"undefined"==typeof e)&&(e={}),"defaultDuration"in e&&(animationDuration=0/0!==parseInt(e.defaultDuration)?e.defaultDuration:animationDuration),"defaultEasing"in e&&(animationEasing=void 0!==$.easing[e.defaultEasing]?e.defaultEasing:animationEasing),"cursor"in e&&(animationCursor="string"==typeof e.cursor?e.cursor:animationCursor),"data"in e)try{events=loadProcess(e.data)}catch(t){console.error(t.name+" : "+t.message),events=null}},load:function(e){if(null===e||"undefined"==typeof e)console.warn("No data was passed, keeping the old data (null if just initialized)");else try{events=loadProcess(e)}catch(t){console.error(t.name+" : "+t.message)}},start:function(){null!==events&&events!=={}?(animating=!0,async.series(events,function(e){console.log(null===e?"animation complete":"Error : "+e),animating=!1})):console.warn("start was called but the list of events was empty or inexistant.")},pause:function(){},resume:function(){},stop:function(){},move:move,click:click,drag:drag,drop:drop,wait:wait,type:type}}();