/*!
 * CursorAnim.js
 * https://github.com/TeKrop/cursoranim
 *
 * Copyright 2015 Valentin PORCHET
 * Released under the MIT license
 */
function findCenter(t){var e,n=$(t.ownerDocument);return t=$(t),e=t.offset(),{x:e.left+t.outerWidth()/2-n.scrollLeft(),y:e.top+t.outerHeight()/2-n.scrollTop()}}function findCorner(t){var e,n=$(t.ownerDocument);return t=$(t),e=t.offset(),{x:e.left-n.scrollLeft(),y:e.top-n.scrollTop()}}$.extend($.simulate.prototype,{simulateDrag:function(){var t=0,e=this.target,n=e.ownerDocument,o=this.options,i="corner"===o.handle?findCorner(e):findCenter(e),a=Math.floor(i.x),r=Math.floor(i.y),s={clientX:a,clientY:r},l=o.dx||(void 0!==o.x?o.x-a:0),u=o.dy||(void 0!==o.y?o.y-r:0),c=o.moves||3;for(this.simulateEvent(e,"mousedown",s);c>t;t++)a+=l/c,r+=u/c,s={clientX:Math.round(a),clientY:Math.round(r)},this.simulateEvent(n,"mousemove",s);$.contains(n,e)&&this.simulateEvent(e,"click",s)},simulateDrop:function(){var t=0,e=this.target,n=e.ownerDocument,o=this.options,i="corner"===o.handle?findCorner(e):findCenter(e),a=Math.floor(i.x),r=Math.floor(i.y),s={clientX:a,clientY:r},l=o.dx||(void 0!==o.x?o.x-a:0),u=o.dy||(void 0!==o.y?o.y-r:0),c=o.moves||3;for(this.simulateEvent(e,"mousedown",s);c>t;t++)a+=l/c,r+=u/c,s={clientX:Math.round(a),clientY:Math.round(r)},this.simulateEvent(n,"mousemove",s);$.contains(n,e)?(this.simulateEvent(e,"mouseup",s),this.simulateEvent(e,"click",s)):this.simulateEvent(n,"mouseup",s)}});var CursorAnim=function(){"use strict";var mousePosition={x:0,y:0},isDragging=!1,draggedElement=null,lastTargettedElement=null,animating=!1,correctEvents=["move","click","drag","drop","wait","type"],cursor=null,overlay=null,animationDuration=1e3,animationEasing="easeInOutCubic",animationCursor="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAATCAYAAACk9eypAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wcFCgwPm9//MwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACcElEQVQoz22Sb09TdxTHvy2XFEyMbkozK50GNaTdjIbEByQ+MgGZFKOYQJbtyXwlxvfhE81eAOHhttCEjjYCRjSoI2CFjSWkEaz33vb23vv7fXxQKP47yUnOg/M533NOvsoNDlEpLwlLO0FBEAjYT/NRjXT61HkmCpOUFxb1bs9LHEDWWoVh+EkzIA2c/YGN9S0mb0/z8sV6BwrD+ItmQDo/cBEsvKluM3l7mvLCorCoXndlzJeg0ifPYGLAwsb6FhOFycObvqaQzeZwXReAOI6pVjcZHR377BGRLKEgagMAjUYDgCgy7O6+Y+x6oQPFJhAYxXHYBowxADSbzX0ly/Z/OxTGb1Gar3TW8TyvDURRBIC1tqOyt+tSff0vN366SaXyWL7fPLzhIIwx+H6TIAgxMXhuwPLSCqMj41TKy8J+BHie15ler7u475tsbf6P77WoLKzw8/Rd/vqzpEQ2m2Nt7Yl6enpkjNHeXl29vb2KQiPHcVSr1WRiRzs7O7p//54cSXIcR3Ecy/M8RVHU3pWkpqamlEqlJHpkrZExRvo+e4FGMyJoGf5Zq3Iqc4YHD36nVnO5dq3AzMwfAmRM24TqP32OVmh5urLK8W/6KFeWdenyFba331IqLTE0dJUDM7ZaLSWTSWl19blGRkY0NzeXyOVyyufzKhaLSqfT6u/PaHZ2VolEQl1dXdLNiTv0pb+j9HdZYWRkQUvLz/TjxSGePX/F/Pwiw8PDNBoNAXIePXqYOHrsiOLYynGSkqR8PqdMJiPf9/XtieNKpVLq7u6WJAmLDFZB2JLBqhXGCiMjvxFq4Nwgv/z6G8VisWOPD8bOS8l4Tfm3AAAAAElFTkSuQmCC",animationCallback=null,events=null,currentPosition={x:0,y:0};$(document).on("mousemove",function(t){null==t.relatedTarget&&(mousePosition={x:t.pageX,y:t.pageY})});var onDragCustomEvent=function(t,e){void 0!==e.position&&(e.position.left=currentPosition.x,e.position.top=currentPosition.y)},loadProcess=function(t){var e=null,n=null;if("string"==typeof t)if(-1!==t.indexOf(".json",t.length-5))$.ajax({url:t,async:!1,dataType:"json",mimeType:"application/json",success:function(t){n=t}});else try{n=JSON.parse(t)}catch(o){throw console.error(o.name+" : "+o.message),new TypeError("Your string doesn't contain valid json data.")}else{if("object"!=typeof t)throw new TypeError("CursorAnim data must be in json format, either by filename, string or array. You provided : "+typeof t);t=JSON.parse(JSON.stringify(t)),n=t}return e=convertDataToEvents(n)},convertDataToEvents=function(jsonData){var actions=[];actions.push(hideCursor);for(var i=0;i<jsonData.length;i++)if("action"in jsonData[i])if(eval("typeof "+jsonData[i].action+" === 'function'")&&correctEvents.indexOf(jsonData[i].action)>-1){var functionContent="return CursorAnim."+jsonData[i].action+"(";functionContent+="options"in jsonData[i]?JSON.stringify(jsonData[i].options)+", ":"{}, ",functionContent+="callback);",actions.push(new Function("callback",functionContent))}else console.warn("The event '"+jsonData[i].action+"' doesn't exist. Skipping it.");else console.warn("Incorrect event : no action was provided. Skipping it.");return actions.push(returnToMousePosition,showCursor),actions},hideCursor=function(t){isDragging=!1,draggedElement=null,lastTargettedElement=null,animating=!1,$("body").css({cursor:"none"}),$("body").append('<img id="cursorAnim" alt="cursor animation" src="'+animationCursor+'"/>'),$("body").append('<div id="overlayCursorAnim"></div>');var e=window.scrollX,n=window.scrollY;window.onscroll=function(){window.scrollTo(e,n)},cursor=$("#cursorAnim"),overlay=$("#overlayCursorAnim"),cursor.css({top:mousePosition.y,left:mousePosition.x}),t()},showCursor=function(t){$("body").css({cursor:"auto"}),cursor.remove(),overlay.remove(),window.onscroll=function(){},isDragging===!0?(isDragging=!1,drop({},t)):t()},returnToMousePosition=function(t){cursor.animate({left:mousePosition.x,top:mousePosition.y},{duration:animationDuration,specialEasing:{left:animationEasing,top:animationEasing},step:function(t,e){e.end="left"===e.prop?mousePosition.x:mousePosition.y},complete:t})},move=function(t,e){var n=parseInt(t.duration)||animationDuration,o=t.easing||animationEasing,i=cursor.offset().left,a=cursor.offset().top,r=null,s=null;if("selector"in t||"position"in t){if("selector"in t){if(lastTargettedElement=$(t.selector),!lastTargettedElement.length)throw showCursor(e),new ReferenceError("The object "+t.selector+" targetted by the move function doesn't exists.");r=lastTargettedElement.offset().left+lastTargettedElement.outerWidth()/2,s=lastTargettedElement.offset().top+lastTargettedElement.outerHeight()/2}else{var l=document.elementFromPoint(parseInt(t.position.x),parseInt(t.position.y));lastTargettedElement=null===l?lastTargettedElement:$(l),r=t.position.x,s=t.position.y}isDragging===!0?($(window).scrollTop()>0?currentPosition={x:draggedElement.position().left,y:draggedElement.position().top}:(currentPosition={x:draggedElement.offset().left,y:draggedElement.offset().top},draggedElement.addClass("cursoranim-draggable-clone")),"clone"!==draggedElement.draggable("option").helper&&(currentPosition.x-=draggedElement.width()/2,currentPosition.y-=draggedElement.height()/2),cursor.animate({left:r,top:s},{duration:n,specialEasing:{left:o,top:o},step:function(t,e){"left"==e.prop?(draggedElement.simulate("drag",{dx:t-i,dy:0}),currentPosition.x+=t-i,i=t):(draggedElement.simulate("drag",{dx:0,dy:t-a}),currentPosition.y+=t-a,a=t)},complete:e})):cursor.animate({left:r,top:s},{duration:n,specialEasing:{left:o,top:o},complete:e})}else console.warn("Didn't provide CSS selector or position for cursor to move on. Skipping."),e()},click=function(t,e){lastTargettedElement.click(),e()},drag=function(t,e){if(isDragging=!0,draggedElement=lastTargettedElement,!draggedElement.is(":data(ui-draggable)"))throw new Error("The element "+draggedElement.selector+" is not draggable. Please use drag only on jQuery UI draggable elements.");draggedElement.bind("drag",onDragCustomEvent),e()},drop=function(t,e){draggedElement.unbind("drag"),draggedElement.removeClass("cursoranim-draggable-clone"),lastTargettedElement.simulate("drop",{target:draggedElement}),isDragging=!1,draggedElement=null,currentPosition={x:0,y:0},e()},wait=function(t,e){var n=parseInt(t.duration)||animationDuration;setTimeout(e,n)},type=function(t,e){lastTargettedElement.is("input")||lastTargettedElement.is("textarea")?"strings"in t?(lastTargettedElement.simulate("focus"),lastTargettedElement.typed({strings:t.strings,typeSpeed:t.typeSpeed||0,startDelay:t.startDelay||0,backSpeed:t.backSpeed||0,backDelay:t.backDelay||500,contentType:"text",onStringTyped:function(){lastTargettedElement.trigger("propertychange")},callback:function(){lastTargettedElement.simulate("blur"),lastTargettedElement.removeData("typed"),e()}})):(console.warn("type function was called without text. Skipping."),e()):(console.warn("the targetted div isn't an input or textarea. Skipping."),e())};return{setOptions:function(options){if((null===options||"undefined"==typeof options)&&(options={}),"defaultDuration"in options&&(animationDuration=0/0!==parseInt(options.defaultDuration)?options.defaultDuration:animationDuration),"defaultEasing"in options&&(animationEasing=void 0!==$.easing[options.defaultEasing]?options.defaultEasing:animationEasing),"cursor"in options&&(animationCursor="string"==typeof options.cursor?options.cursor:animationCursor),"data"in options)try{events=loadProcess(options.data)}catch(e){console.error(e.name+" : "+e.message),events=null}"callback"in options&&(animationCallback="function"==typeof eval(options.callback)?options.callback:null)},load:function(t){if(null===t||"undefined"==typeof t)console.warn("No data was passed, keeping the old data (null if just initialized)");else try{events=loadProcess(t)}catch(e){console.error(e.name+" : "+e.message)}},start:function(){null!==events&&events!=={}?(animating=!0,async.series(events,function(t){null===t?(console.log("animation complete"),null!==animationCallback&&(console.log("callback triggered"),animationCallback())):console.log("Error : "+t),animating=!1})):console.warn("start was called but the list of events was empty or inexistant.")},pause:function(){},resume:function(){},stop:function(){},move:move,click:click,drag:drag,drop:drop,wait:wait,type:type}}();